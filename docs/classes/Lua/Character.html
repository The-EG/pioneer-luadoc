<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Character</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic177"></a><div class="CTopic TClass LLua first">
 <div class="CTitle">Character</div>
 <div class="CBody"><p>A character sheet, used to keep characteristics of any non-player character which should be persistent, allowing re-use of characters over time and across Lua scripts.</p><p>Additionally, one character sheet is initialised to keep the player's information.&nbsp; Attributes in that character sheet begin as default values, and should be modified by the player's conduct in the game.</p><p>Character is inspired by the GURPS table-top roleplaying system.&nbsp; In addition to details such as the character's name, face, rank and so forth are a number of attributes.&nbsp; These attributes usually range from 4 to 64, although lower and higher numbers are valid.&nbsp; The attributes define the persona of the character, and represent the chance of that character's success in various endeavours.&nbsp; These chances are tested by the virtual roll of four sixteen-sided dice.&nbsp; The target is to &quot;roll under&quot; for success.</p><p>So, if a character is trying to steal something, and there is an attribute called &quot;theft&quot; (hypothetical as I write), then we can determine whether that character succeeds by rolling the dice.&nbsp; A character who is a good thief would have a high number in their &quot;theft&quot; attribute, making it more likely that the dice roll result will be lower.&nbsp; If it's lower, the theft succeeds.</p><p>Character sheets inherit their methods, and many default values, from the class itself.</p><p>Whilst some role-playing attributes are defined here, and can be given some random values using RollNew(), in practice any arbitrary attribute can be added to a character on demand, and these attributes can be safely tested on any character, whether defined or not.&nbsp; Undefined values return failure if tested using TestRoll().</p><p><b>Saving characters</b></p><p>Within the Character class there is a table called &quot;persistent&quot;.&nbsp; Character sheets can be stored in this table using the Save() method.&nbsp; This method checks whether the character sheet already exists in that table, and also updates the values of the persistence members (see below).&nbsp; Saved characters become available to other scripts.</p><p>Saved characters are indexed numerically, and can be retrieved with ipairs() and counted with the # operator.&nbsp; The player's sheet is stored as Character.persistent.player, and is the special case.</p></div>
</div>

<a name="Attributes"></a><a name="Topic178"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Attributes</div>
</div>

<a name="player"></a><a name="Topic179"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">player</div>
 <div class="CBody"><p>Boolean value; true if this instance of the table is for the player.&nbsp; Only one character sheet should be that of the player.&nbsp; Useful if there's the slightest chance of the player's own sheet getting mixed up with those of NPCs.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="name"></a><a name="Topic180"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">name</div>
 <div class="CBody"><p>Name of character</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="female"></a><a name="Topic181"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">female</div>
 <div class="CBody"><p>Gender of character.&nbsp; If true, character is female.&nbsp; If false, male.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="seed"></a><a name="Topic182"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">seed</div>
 <div class="CBody"><p>Seed for predictable randomness, if one is required.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="title"></a><a name="Topic183"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">title</div>
 <div class="CBody"><p>Job title, for use in BBS faces</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="available"></a><a name="Topic184"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">available</div>
 <div class="CBody"><p>Boolean value; whether this character is available for use by a mission.&nbsp; Used to &quot;lock&quot; a persistent character, so that two missions don't use the same character at the same time.&nbsp; Not particularly meaningful for transient characters.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="useCount"></a><a name="Topic185"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">useCount</div>
 <div class="CBody"><p>Count of the number of times a script has used this character.&nbsp; Used to determine how well used a character is.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="lastSavedTime"></a><a name="Topic186"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">lastSavedTime</div>
 <div class="CBody"><p>The game time, in seconds since 12:00 01-01-3200, that this character was last saved.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="lastSavedSystemPath"></a><a name="Topic187"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">lastSavedSystemPath</div>
 <div class="CBody"><p>The system path of the station or system at which this character was last saved.&nbsp; Save() sets this to that of Game.player, since character sheets have no intrinsic location.&nbsp; Can be directly set immediately after the call to Save() if it needs to be some other path.</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="dead"></a><a name="Topic188"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">dead</div>
 <div class="CBody"><p>Boolean attribute. If set to a true value, character is deceased and all test rolls will fail.</p><div class="CHeading">Availability</div><p>alpha 31</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="playerRelationship"></a><a name="Topic189"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">playerRelationship</div>
 <div class="CBody"><p>Integer attribute for RPG style dice tests.&nbsp; PlayerRelationship is intended to reflect the character's willingness to accommodate the player.&nbsp; Tested with 4xD16; useful values are 4 (despise) to 65 (adore).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="luck"></a><a name="Topic190"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">luck</div>
 <div class="CBody"><p>Integer attribute for RPG style dice tests.&nbsp; Luck is intended to reflect the character's innate good fortune.&nbsp; Tested with 4xD16; useful values are 4 (never lucky) to 65 (always lucky).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="intelligence"></a><a name="Topic191"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">intelligence</div>
 <div class="CBody"><p>Integer attribute for RPG style dice tests.&nbsp; Intelligence is intended to reflect the character's ability to learn.&nbsp; Tested with 4xD16; useful values are 4 (moron) to 65 (genius).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 30</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="charisma"></a><a name="Topic192"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">charisma</div>
 <div class="CBody"><p>Integer attribute for RPG style dice tests.&nbsp; Charisma is intended to reflect the character's ability to win contracts or favrouable deals.&nbsp; Tested with 4xD16; useful values are 4 (always hated) to 65 (always liked).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="notoriety"></a><a name="Topic193"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">notoriety</div>
 <div class="CBody"><p>Integer attribute for RPG style dice tests.&nbsp; Notoriety is intended to reflect how well the character's reputation (good or bad) is known.&nbsp; Tested against 4xD16; useful values are 4 (complete nobody) to 65 (celebrity).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="lawfulness"></a><a name="Topic194"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">lawfulness</div>
 <div class="CBody"><p>Integer attribute for RPG style dice tests.&nbsp; Lawfulness is intended to reflect the character's willingness to break the law.&nbsp; Tested with 4xD16; useful values are 4 (going straight) to 65 (criminal).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="engineering"></a><a name="Topic195"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">engineering</div>
 <div class="CBody"><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp; Engineering is intended to reflect the character's mechanical, electrical or other tecnical skills.&nbsp; Tests might be made against this attribute to see whether a character can repair a damaged piece of equipment, partially repair a ship, fit new equipment and so on.&nbsp; Tested with 4xD16; useful values are 4 (always fails) to 65 (always succeeds).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="piloting"></a><a name="Topic196"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">piloting</div>
 <div class="CBody"><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp; Piloting is intended to reflect the character's skill at flying spacecraft.&nbsp; Tested with 4xD16; useful values are 4 (always crashes) to 65 (aerobat).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="navigation"></a><a name="Topic197"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">navigation</div>
 <div class="CBody"><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp; Navigation is intended to reflect the character's skill at course plotting, mapping and so on.&nbsp; This might be tested to see whether a ship can gain additional range on a hyperspace jump, by having this character involved, or if, during a mission, a character succeeds in identifying a location based on clues, etc.&nbsp; Tested with 4xD16; useful values are 4 (always lost) to 65 (human compass).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="sensors"></a><a name="Topic198"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">sensors</div>
 <div class="CBody"><p>(Crew skill)</p><p>Integer attribute for RPG style dice tests.&nbsp; Sensors is intended to reflect the character's ability to get the most from a ship's scanner, radar, etc.&nbsp; This skill might be tested to see if a hidden ship can be found, or an unknown item in space can be identified.&nbsp; Tested with 4xD16; useful values are 4 (blind) to 65 (no hiding from this guy).&nbsp; Modifiers can cause numbers outside this range to become useful (see TestRoll).</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="killcount"></a><a name="Topic199"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">killcount</div>
 <div class="CBody"><p>Integer value; number of objects destroyed by this character. Automatically incremented in the case of the player by one of the stock scripts.</p><div class="CHeading">Availability</div><p>alpha 29</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="assistcount"></a><a name="Topic200"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">assistcount</div>
 <div class="CBody"><p>Integer value; number of objects damaged by this character which were subsequently destroyed by something else. Automatically incremented in the case of the player by one of the stock scripts.</p><div class="CHeading">Availability</div><p>alpha 29</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="reputation"></a><a name="Topic201"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">reputation</div>
 <div class="CBody"><p>Integer value; reflects the reputation amassed through taking missions.&nbsp; It should be reduced for failed missions, and increased for successful missions.</p><div class="CHeading">Availability</div><p>January 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Methods"></a><a name="Topic202"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Methods</div>
</div>

<a name="New"></a><a name="Topic203"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">New</div>
 <div id="NDPrototype203" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">New = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">template,</td></tr><tr><td class="PName first last">rand</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Returns a new character sheet, inheriting from Character, based on an optional template.</p><p>character = Character.New(template,rand)</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">character</td><td class="CDLDefinition"><p>a character sheet, which inherits from Character class</p></td></tr></table><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">template</td><td class="CDLDefinition"><p>(optional) a table containing default values</p></td></tr><tr><td class="CDLEntry">rand</td><td class="CDLDefinition"><p>(optional) the Rand object to use to generate values. If omitted, Engine.rand will be used</p></td></tr></table><div class="CHeading">Example</div><pre>regular_joe = Character.New()</pre><pre>lucky_guy = Character.New({luck = 180})</pre><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Clone"></a><a name="Topic204"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">Clone</div>
 <div id="NDPrototype204" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">Clone = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Clones a character sheet.</p><p>clone = original:Clone()</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">clone</td><td class="CDLDefinition"><p>a new character sheet, which inherits from Character class and is based on the original</p></td></tr></table><div class="CHeading">Example</div><pre>-- How to clone lucky_guy<br />new_guy = lucky_guy:Clone()</pre><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="DiceRoll"></a><a name="Topic205"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">DiceRoll</div>
 <div id="NDPrototype205" class="NDPrototype"><div class="PSection PPlainSection">DiceRoll = <span class="SHKeyword">function</span> ()</div></div>
 <div class="CBody"><p>Returns the results of a simulated 4xD16 roll.&nbsp; Results are random, but distributed in a bell curve about the value 34.&nbsp; The minimum result is 4, and the maximum result is 64.</p><pre>roll = Character.DiceRoll()</pre><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">roll</td><td class="CDLDefinition"><p>Integer value between 4 and 265 (inclusive), most likely 34</p></td></tr></table><div class="CHeading">Example</div><pre>new_character.charisma = Character.DiceRoll()</pre><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="RollNew"></a><a name="Topic206"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">RollNew</div>
 <div id="NDPrototype206" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">RollNew = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self,</td></tr><tr><td class="PName first last">crew</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Uses DiceRoll to initialise the following attributes to random values:- luck, charisma, notoriety, lawfulness.</p><p>If optional parameter &quot;crew&quot; is specified and is true, then also:- engineering, piloting, navigation, sensors.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">crew</td><td class="CDLDefinition"><p>If true, then RollNew() also sets random crew skills, which will normally become much higher than the default values.</p></td></tr></table><div class="CHeading">Example</div><pre>new_character:RollNew()</pre><pre>new_character:RollNew(true)</pre><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="TestRoll"></a><a name="Topic207"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">TestRoll</div>
 <div id="NDPrototype207" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">TestRoll = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self,</td></tr><tr><td class="PName first last">attribute,</td></tr><tr><td class="PName first last">modifier</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Uses DiceRoll to generate a random number, which it compares with the provided attribute.&nbsp; If the generated number is less than the sum of the attribute and the provided modifier, it returns true.&nbsp; If it is greater, or the attribute does not exist, it returns false.</p><pre>success = somebody:TestRoll('notoriety')</pre><p>If the DiceRoll is from 4-8, then it was a critical failure and that attribute is abused.&nbsp; It is decremented by one for future tests.</p><p>If the DiceRoll is from 60-64, then it was a critical success and that attribute is exercised.&nbsp; It is incremented by one for future tests.</p><p>If the Character is dead, the test roll will always fail.</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">success</td><td class="CDLDefinition"><p>False if failed, otherwise the dice roll value (low is good).</p></td></tr></table><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">attribute</td><td class="CDLDefinition"><p>The key of an attribute in this instance of the character table (such as luck, charisma, or any arbitrarily added attribute)</p></td></tr><tr><td class="CDLEntry">modifier</td><td class="CDLDefinition"><p>An arbitrary integer used to increase or decrease the odds of returning true or false.&nbsp; Positive values increase the odds of a true result, and negative values increase the odds of false.&nbsp; Default is zero.</p></td></tr></table><div class="CHeading">Example</div><pre>if (player:TestRoll('lawfulness',20)) then Comms.Message('A fellow criminal!')</pre></div>
</div>

<a name="SafeRoll"></a><a name="Topic208"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">SafeRoll</div>
 <div id="NDPrototype208" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">SafeRoll = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self,</td></tr><tr><td class="PName first last">attribute,</td></tr><tr><td class="PName first last">modifier</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Uses DiceRoll to generate a random number, which it compares with the provided attribute.&nbsp; If the generated number is less than the sum of the attribute and the provided modifier, it returns true.&nbsp; If it is greater, or the attribute does not exist, it returns false.</p><pre>success = somebody:SafeRoll('notoriety')</pre><p>Unlike TestRoll, this function never modifies the value of the attribute.</p><p>If the Character is dead, the test roll will always fail.</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">success</td><td class="CDLDefinition"><p>False if failed, otherwise the dice roll value (low is good).</p></td></tr></table><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">attribute</td><td class="CDLDefinition"><p>The key of an attribute in this instance of the character table (such as luck, charisma, or any arbitrarily added attribute)</p></td></tr><tr><td class="CDLEntry">modifier</td><td class="CDLDefinition"><p>An arbitrary integer used to increase or decrease the odds of returning true or false.&nbsp; Positive values increase the odds of a true result, and negative values increase the odds of false.&nbsp; Default is zero.</p></td></tr></table><div class="CHeading">Example</div><pre>if (player:SafeRoll('lawfulness',20)) then Comms.Message('A fellow criminal!')</pre></div>
</div>

<a name="Save"></a><a name="Topic209"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">Save</div>
 <div id="NDPrototype209" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">Save = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>If the character is not already in the table of persistent characters, inserts the character into that table.&nbsp; Also set available to true, and update the timestamp and location members.</p><div class="CHeading">Return</div><p>Index of this character in Character.persistent table</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">attribute</td><td class="CDLDefinition"><p>The key of an attribute in this instance of the character table (such as luck, charisma, or any arbitrarily added attribute)</p></td></tr><tr><td class="CDLEntry">modifier</td><td class="CDLDefinition"><p>An arbitrary integer used to increase or decrease the odds of returning true or false.&nbsp; Positive values increase the odds of a true result, and negative values increase the odds of false.&nbsp; Default is zero.</p></td></tr></table><div class="CHeading">Example</div><p>local BBS_characterID = BBS_character:Save()</p></div>
</div>

<a name="Find"></a><a name="Topic210"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">Find</div>
 <div id="NDPrototype210" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">Find = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">filter</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Returns an iterator across all persistent characters who match the specified filter.</p><p>iterator = Character.Find(filter)</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">filter</td><td class="CDLDefinition"><p>an optional function.&nbsp; If specified, the function will be called once for each saved character with the Character object as the only parameter.&nbsp; If the filter function returns true then the Character will be returned by the iterator, otherwise it will be omitted.&nbsp; If no filter function is specified then all Characters are returned.</p></td></tr></table><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">iterator</td><td class="CDLDefinition"><p>a function which will generate the returned results, returning one each time it is called until it runs out, after which it returns nil.</p></td></tr></table><div class="CHeading">Example</div><p>Print names of all female characters who have charisma &gt; 36</p><pre>for party_girl in Character.Find( function (NPC)<br />                                    return (NPC.female and (NPC.charisma &gt; 36))<br />                                  end)<br />do<br />  print(party_girl.name)<br />end</pre><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="FindAvailable"></a><a name="Topic211"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">FindAvailable</div>
 <div id="NDPrototype211" class="NDPrototype"><div class="PSection PPlainSection">FindAvailable = <span class="SHKeyword">function</span> ()</div></div>
 <div class="CBody"><p>Returns an iterator across all persistent characters where available is true and dead is false</p><p>iterator = Character.FindAvailable()</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">iterator</td><td class="CDLDefinition"><p>a function which will generate the returned results, returning one each time it is called until it runs out, after which it returns nil.</p></td></tr></table><div class="CHeading">Example</div><p>Print names of all characters</p><pre>for person in Character.FindAvailable()<br />do<br />  print(person.name)<br />end</pre><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="CheckOut"></a><a name="Topic212"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">CheckOut</div>
 <div id="NDPrototype212" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">CheckOut = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>&quot;Checks out&quot; a persistent character, flagging it for exclusive use.&nbsp; Sets available to false, meaning that FindAvailable() will not return this character.</p><p>ch:CheckOut()</p><p>A character is checked back in using Save().</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">true</td><td class="CDLDefinition"><p>The character was available, and has been marked unavailable</p></td></tr><tr><td class="CDLEntry">false</td><td class="CDLDefinition"><p>The character wasn't available, or didn't exist</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="UnSave"></a><a name="Topic213"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">UnSave</div>
 <div id="NDPrototype213" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">UnSave = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Removes a character from the persistent characters table</p><p>ch:UnSave()</p><div class="CHeading">Availability</div><p>alpha 17</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="GetCombatRating"></a><a name="Topic214"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">GetCombatRating</div>
 <div id="NDPrototype214" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">GetCombatRating = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Returns a translatable string giving the character's combat rating</p><p>rating = ch:GetCombatRating()</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">rating</td><td class="CDLDefinition"><p>Translatable string</p></td></tr></table><div class="CHeading">Example</div><p>Show player their own combat rating as a UI message</p><pre>l = Lang.GetResource(&quot;ui-core&quot;)<br />UI.Message(('Your combat rating is {rating}'):interp({<br />    rating = l[Character.persistent.player:GetCombatRating(]),<br />}))</pre><div class="CHeading">Availability</div><p>alpha 29</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="IsCombatRated"></a><a name="Topic215"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">IsCombatRated</div>
 <div id="NDPrototype215" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">IsCombatRated = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self,</td></tr><tr><td class="PName first last">rating</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Tests whether a character has reached a specific combat rating</p><p>ch:IsCombatRated(rating)</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">rating</td><td class="CDLDefinition"><p>One of the following values:</p></td></tr></table><pre>'HARMLESS','MOSTLY_HARMLESS','POOR','AVERAGE','ABOVE_AVERAGE',<br />'COMPETENT','DANGEROUS','DEADLY','ELITE'</pre><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">true</td><td class="CDLDefinition"><p>Character has reached the specified rating</p></td></tr><tr><td class="CDLEntry">false</td><td class="CDLDefinition"><p>Character has not reached the specified rating (or specified rating was not a valid value)</p></td></tr></table><div class="CHeading">Example</div><p>Check to see if the player is rated &quot;Deadly&quot; or higher</p><pre>if Character.persistent.player:IsCombatRated('DEADLY') then<br />  DoSomethingDeadly() -- Player is rated &quot;Deadly&quot; or higher<br />end</pre><div class="CHeading">Availability</div><p>alpha 29</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="GetReputationRating"></a><a name="Topic216"></a><div class="CTopic TFunction LLua last">
 <div class="CTitle">GetReputationRating</div>
 <div id="NDPrototype216" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">GetReputationRating = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">self</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Returns a translatable string giving the character's reputation rating</p><p>rating = ch:GetReputationRating()</p><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">rating</td><td class="CDLDefinition"><p>Translatable string</p></td></tr></table><div class="CHeading">Example</div><p>Show player their own reputation rating as a UI message</p><pre>l = Lang.GetResource(&quot;ui-core&quot;)<br />UI.Message(('Your reputation is {reputation}'):interp({<br />    reputation = l[Character.persistent.player:GetReputationRating(]),<br />}))</pre><div class="CHeading">Availability</div><p>January 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

</body></html>