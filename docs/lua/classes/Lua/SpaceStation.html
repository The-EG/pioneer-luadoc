<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>SpaceStation</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic711"></a><div class="CTopic TClass LLua first">
 <div class="CTitle">SpaceStation</div>
 <div class="CBody"><p>Class representing a space station. Inherits from <a href="../../index.html#LuaClass:ModelBody" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,342);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ModelBody</a></p></div>
</div>

<a name="Functions"></a><a name="Topic712"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Functions</div>
</div>

<a name="GetGroundPosition"></a><a name="Topic713"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">GetGroundPosition</div>
 <div class="CBody"><p>Get latitude, longitude of a station on the ground or nil if this is an orbital station</p><pre>latitude, longitude = station:GetGroundPosition()</pre><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">latitude</td><td class="CDLDefinition"><p>the latitude of the station in radians</p></td></tr><tr><td class="CDLEntry">longitude</td><td class="CDLDefinition"><p>the longitude of the station in radians</p></td></tr></table><div class="CHeading">Examples</div><pre>-- Get ground position of L.A. when starting on Earth<br />local la = Game.player:GetDockedWith()<br />local lat, long = la:GetGroundPosition()<br />lat = math.rad2deg(lat)<br />long = math.rad2deg(long)</pre><div class="CHeading">Availability</div><p>July 2013</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="RequestDockingClearance"></a><a name="Topic714"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">RequestDockingClearance</div>
 <div class="CBody"><p>Request docking clearance for a specific ship.</p><pre>clearanceGranted = station:RequestDockingClearance(ship)</pre><p>NOTE: This method will queue an `onDockingClearanceGranted` or `onDockingClearanceDenied` event on success/failure, as the expectation is that requesting docking clearance will eventually be an asynchronous operation.</p><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">clearanceGranted</td><td class="CDLDefinition"><p>a boolean indicating whether the ship has been approved by ATC to land at this station.</p></td></tr></table><div class="CHeading">Availability</div><p>Nov 2020</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="GetAssignedBayNumber"></a><a name="Topic715"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">GetAssignedBayNumber</div>
 <div class="CBody"><p>Get the assigned docking bay or landing pad for this ship, if any.</p><pre>bayNumber = station:GetAssignedBayNumber(ship)</pre><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">bayNumber</td><td class="CDLDefinition"><p>the zero-based index of the landing pad or docking bay this ship is cleared to land at, or nil if this ship has not requested docking permission.</p></td></tr></table><div class="CHeading">Examples</div><pre>-- Get our current bay number and print it<br />local num = station:GetAssignedBayNumber(Game.player)<br />Game.AddCommsLogLine(string.interp(&quot;Please proceed to dock at bay {}, thank you!&quot;, num + 1), station)</pre><div class="CHeading">Availability</div><p>Nov 2020</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="GetNearbyTraffic"></a><a name="Topic716"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">GetNearbyTraffic</div>
 <div class="CBody"><p>Gets the number of ships within a specified radius in meters of this station.</p><pre>nearby = station:GetNearbyTraffic(50000) -- meters</pre><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">nearby</td><td class="CDLDefinition"><p>the number of ships within the specified radius of the station.</p></td></tr></table><div class="CHeading">Availability</div><p>Nov 2020</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="GetEquipmentPrice"></a><a name="Topic81"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">GetEquipmentPrice</div>
 <div id="NDPrototype81" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:GetEquipmentPrice (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">e</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Get the price of an equipment or cargo item traded at this station</p><pre>price = station:GetEquipmentPrice(equip)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">equip</td><td class="CDLDefinition"><p>the &lt;Constants.EquipType&gt; string for the equipment or cargo item</p></td></tr></table><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">price</td><td class="CDLDefinition"><p>the price of the equipment or cargo item</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="GetEquipmentStock"></a><a name="Topic82"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">GetEquipmentStock</div>
 <div id="NDPrototype82" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:GetEquipmentStock (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">e</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Get the quantity of an equipment or cargo item this station has available for trade</p><pre>stock = station:GetEquipmentStock(equip)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">equip</td><td class="CDLDefinition"><p>the &lt;Constants.EquipType&gt; string for the equipment or cargo item</p></td></tr></table><div class="CHeading">Returns</div><table class="CDefinitionList"><tr><td class="CDLEntry">stock</td><td class="CDLDefinition"><p>the amount available for trade</p></td></tr></table><div class="CHeading">Availability</div><p>201308</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="AddEquipmentStock"></a><a name="Topic83"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">AddEquipmentStock</div>
 <div id="NDPrototype83" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:AddEquipmentStock (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">e,</td></tr><tr><td class="PName first last">stock</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Modify the quantity of an equipment or cargo item this station has available for trade</p><pre>station:AddEquipmentStock(equip, amount)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">equip</td><td class="CDLDefinition"><p>the &lt;Constants.EquipType&gt; string for the equipment or cargo item</p></td></tr><tr><td class="CDLEntry">amount</td><td class="CDLDefinition"><p>the amount of the item to add (or subtract) from the station stock</p></td></tr></table><div class="CHeading">Availability</div><p>201308</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="LaunchPolice"></a><a name="Topic85"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">LaunchPolice</div>
 <div id="NDPrototype85" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:LaunchPolice(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">targetShip</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Launch station police</p><pre>station:LaunchPolice(targetShip)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">targetShip</td><td class="CDLDefinition"><p>the ship to intercept</p></td></tr></table><div class="CHeading">Availability</div><p>2015 September</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="LandPolice"></a><a name="Topic86"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">LandPolice</div>
 <div id="NDPrototype86" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:LandPolice()</div></div>
 <div class="CBody"><p>Clear any target assigned and land flying station police.</p><pre>station:LandPolice()</pre><div class="CHeading">Availability</div><p>2015 September</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Methods"></a><a name="Topic87"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Methods</div>
</div>

<a name="AddAdvert"></a><a name="Topic88"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">AddAdvert</div>
 <div class="CBody"><p>Add an advertisement to the station's bulletin board</p><pre>ref = station:AddAdvert({<br />    description = description,<br />    icon        = icon,<br />    onChat      = onChat,<br />    onDelete    = onDelete,<br />    isEnabled   = isEnabled,<br />})<br /><br />-- Legacy form<br />ref = station:AddAdvert(description, onChat, onDelete)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">description</td><td class="CDLDefinition"><p>text to display in the bulletin board</p></td></tr><tr><td class="CDLEntry">icon</td><td class="CDLDefinition"><p>optional, filename of an icon to display alongside the advert.&nbsp; Defaults to bullet (data/icons/bbs/default).</p></td></tr><tr><td class="CDLEntry">onChat</td><td class="CDLDefinition"><p>function to call when the ad is activated. The function is passed three parameters: a <a href="../../index.html#LuaClass:ChatForm" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,264);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >ChatForm</a> object for the ad conversation display, the ad reference returned by <a href="../../index.html#LuaClass:SpaceStation:AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >AddAdvert</a> when the ad was created, and an integer value corresponding to the action that caused the activation. When the ad is initially selected from the bulletin board, this value is 0. Additional actions (and thus values) are defined by the script via &lt;ChatForm.AddAction&gt;.</p></td></tr><tr><td class="CDLEntry">onDelete</td><td class="CDLDefinition"><p>optional. function to call when the ad is removed from the bulletin board. This happens when <a href="../../index.html#LuaClass:SpaceStation:RemoveAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,89);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >RemoveAdvert</a> is called, when the ad is cleaned up after &lt;ChatForm.RemoveAdvertOnClose&gt; is called, and when the <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a> itself is destroyed (eg the player leaves the system).</p></td></tr><tr><td class="CDLEntry">isEnabled</td><td class="CDLDefinition"><p>optional. function to call to determine whether the advert is enabled. Disabled adverts are shown in darker tone than enabled ones. When not given, all adverts are considered enabled.</p></td></tr></table><div class="CHeading">Return</div><table class="CDefinitionList"><tr><td class="CDLEntry">ref</td><td class="CDLDefinition"><p>an integer value for referring to the ad in the future. This value will be passed to the ad's chat function and should be passed to <a href="../../index.html#LuaClass:SpaceStation:RemoveAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,89);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >RemoveAdvert</a> to remove the ad from the bulletin board.</p></td></tr></table><div class="CHeading">Example</div><pre>local ref = station:AddAdvert(<br />    &quot;FAST SHIP to deliver a package to the Epsilon Eridani system.&quot;,<br />    function (ref, opt) ... end,<br />    function (ref) ... end<br />)</pre><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="RemoveAdvert"></a><a name="Topic89"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">RemoveAdvert</div>
 <div id="NDPrototype89" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:RemoveAdvert (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">ref</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Remove an advertisement from the station's bulletin board</p><pre>station:RemoveAdvert(ref)</pre><p>If the deletefunc parameter was supplied to <a href="../../index.html#LuaClass:SpaceStation:AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >AddAdvert</a> when the ad was created, it will be called as part of this call.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ref</td><td class="CDLDefinition"><p>the advert reference number returned by <a href="../../index.html#LuaClass:SpaceStation:AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >AddAdvert</a></p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="LockAdvert"></a><a name="Topic90"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">LockAdvert</div>
 <div id="NDPrototype90" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:LockAdvert (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">ref</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><pre>station:LockAdvert(ref)</pre><p>Only one advert may be locked at a time. Locked adverts are not removed by RemoveAdvert until they are unlocked.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ref</td><td class="CDLDefinition"><p>the advert reference number returned by <a href="../../index.html#LuaClass:SpaceStation:AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >AddAdvert</a></p></td></tr></table><div class="CHeading">Availability</div><p>September 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="UnlockAdvert"></a><a name="Topic91"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">UnlockAdvert</div>
 <div id="NDPrototype91" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> <a href="../../index.html#LuaClass:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>:UnlockAdvert (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">ref</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><pre>station:UnlockAdvert(ref)</pre><p>Releases the preserved advert. There must be an advert preserved at the time. If RemoveAdvert(ref) was called with the preserved advert's ref while the advert was preserved, it is now removed.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ref</td><td class="CDLDefinition"><p>the advert reference number returned by <a href="../../index.html#LuaClass:SpaceStation:AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >AddAdvert</a></p></td></tr></table><div class="CHeading">Availability</div><p>September 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Attributes"></a><a name="Topic717"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Attributes</div>
</div>

<a name="numDocks"></a><a name="Topic718"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">numDocks</div>
 <div class="CBody"><p>The number of docking ports a spacestation has.</p><div class="CHeading">Availability</div><p>alpha 21</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="numShipsDocked"></a><a name="Topic719"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">numShipsDocked</div>
 <div class="CBody"><p>The number of ships docked at spacestation</p><div class="CHeading">Availability</div><p>201404</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="isGroundStation"></a><a name="Topic720"></a><div class="CTopic TAttribute LLua">
 <div class="CTitle">isGroundStation</div>
 <div class="CBody"><p>true if station is on the ground, false if its an orbital</p><div class="CHeading">Availability</div><p>alpha 30</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="lawEnforcedRange"></a><a name="Topic84"></a><div class="CTopic TAttribute LLua last">
 <div class="CTitle">lawEnforcedRange</div>
 <div class="CBody"><p>The distance, in meters, at which a station upholds the law, (is 50 km for all at the moment)</p><div class="CHeading">Availability</div><p>2015 September</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

</body></html>