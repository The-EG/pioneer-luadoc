<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Event.lua</title><link rel="stylesheet" type="text/css" href="../styles/main.css" /><script type="text/javascript" src="../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Event"></a><a name="Topic167"></a><div class="CTopic TInterface LLua first">
 <div class="CTitle">Event</div>
 <div class="CBody"><p>The majority of the work done by a Pioneer Lua module is in response to events. The typical structure of a module will be to define a number of event handler functions and then register them to receive a specific types of event.</p><p>When events occur within the game, such as a ship docking or the player coming under attack, an event is added to the event queue. At the end of each physics frame, queued events are processed by calling the handlers registered with for each type of event.</p><p>An event usually has one or more parameters attached to it that describe the details of the event. For example, the <a href="../index.html#File3:Event.lua:Event.onShipDocked" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,184);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onShipDocked</a> event has two parameters, the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that docked, and the <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a> it docked with.</p><p>Many of these events are triggered as a result of something happening to a <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a>. The same events are used when something happens to a <a href="../index.html#File:LuaPlayer.cpp.lua:Player" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,297);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Player</a> (which is also a <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a>). Call the <a href="../index.html#File:LuaShip.cpp.lua:Ship.IsPlayer" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,481);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship.IsPlayer</a> method on the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> if your module needs to know the difference.</p></div>
</div>

<a name="Event.Functions"></a><a name="Topic168"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Functions</div>
</div>

<a name="Event.Register"></a><a name="Topic169"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">Register</div>
 <div id="NDPrototype169" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">Register = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">name,</td></tr><tr><td class="PName first last">cb</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Register a function with a specific type of event. When an event with the named type is processed, the function will be called.</p><pre>Event.Register(name, function)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">name</td><td class="CDLDefinition"><p>the name (type) of the event</p></td></tr><tr><td class="CDLEntry">function</td><td class="CDLDefinition"><p>function to call when an event of the named type is processed.&nbsp; The function will recieve a copy of the parameters attached to the event.</p></td></tr></table><div class="CHeading">Example</div><pre>Event.Register(&quot;onEnterSystem&quot;, function (ship)<br />    print(&quot;welcome to &quot;..Game.system.name..&quot;, &quot;..ship.label)<br />end)</pre><div class="CHeading">Availability</div><p>alpha 26</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.Deregister"></a><a name="Topic170"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">Deregister</div>
 <div id="NDPrototype170" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">Deregister = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">name,</td></tr><tr><td class="PName first last">cb</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Deregisters a function from an event type. The funtion will no longer receive events of the named type.</p><p>If the function is not registered this method does nothing.</p><pre>Event.Deregister(name, function)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">name</td><td class="CDLDefinition"><p>the name (type) of the event</p></td></tr><tr><td class="CDLEntry">function</td><td class="CDLDefinition"><p>a function that was previously connected to this queue with &lt;Connect&gt;</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 26</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.Queue"></a><a name="Topic171"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">Queue</div>
 <div id="NDPrototype171" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">Queue = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="first"></td><td class="PName last">name,</td></tr><tr><td class="PSymbols first">...</td><td class="last"></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Add an event to the queue of pending events. The event will be distributed to the handlers when the queue is processed.</p><pre>Event.Queue(name, ...)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">name</td><td class="CDLDefinition"><p>the name (type) of the event</p></td></tr><tr><td class="CDLEntry">...</td><td class="CDLDefinition"><p>zero or more arguments to be passed to the handlers</p></td></tr></table><div class="CHeading">Example</div><pre>Event.Queue(&quot;onEnterSystem&quot;, ship)</pre><div class="CHeading">Availability</div><p>alpha 26</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.DebugTimer"></a><a name="Topic172"></a><div class="CTopic TFunction LLua">
 <div class="CTitle">DebugTimer</div>
 <div id="NDPrototype172" class="NDPrototype WideForm"><div class="PSection PParameterSection CStyle"><table><tr><td class="PBeforeParameters">DebugTimer = <span class="SHKeyword">function</span> (</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first last">name,</td></tr><tr><td class="PName first last">enabled</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Enables the function timer for this event type. When enabled the console will display the amount of time that each handler for this event type takes to run.</p><pre>Event.DebugTimer(name, enabled)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">name</td><td class="CDLDefinition"><p>name (type) of the event</p></td></tr><tr><td class="CDLEntry">enabled</td><td class="CDLDefinition"><p>a true value to enable the timer, or a false value to disable it.</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 26</p><div class="CHeading">Status</div><p>debug</p></div>
</div>

<a name="Event.Events"></a><a name="Topic173"></a><div class="CTopic TGroup LLua">
 <div class="CTitle">Events</div>
</div>

<a name="Event.onGameStart"></a><a name="Topic174"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onGameStart</div>
 <div class="CBody"><p>Triggered when the game is first initialised.</p><pre>local onGameStart = function () ... end<br />Event.Register(&quot;onGameStart&quot;, onGameStart)</pre><p>onGameStart is triggered just after the physics <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> objects (including the <a href="../index.html#File:LuaPlayer.cpp.lua:Player" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,297);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Player</a>) are placed.</p><p>This is a good place to add equipment to the Player ship or spawn objects in the space. You should also initialise your module data for the game here.</p><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onGameEnd"></a><a name="Topic175"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onGameEnd</div>
 <div class="CBody"><p>Triggered when game is finished.</p><pre>local onGameEnd = function () ... end<br />Event.Register(&quot;onGameEnd&quot;, onGameEnd)</pre><p>Triggered just before the physics <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> objects (include the <a href="../index.html#File:LuaPlayer.cpp.lua:Player" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,297);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Player</a>) are destroyed and Pioneer returns to the main menu.</p><p>You should clean up any game data here. Remember that your module will be re-used if the player begins another game. You probably don't want any data from a previous game to leak into a new one.</p><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onEnterSystem"></a><a name="Topic176"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onEnterSystem</div>
 <div class="CBody"><p>Triggered when a ship enters a system after hyperspace.</p><pre>local onEnterSystem = function (ship) ... end<br />Event.Register(&quot;onEnterSystem&quot;, onEnterSystem)</pre><p>This is the place to spawn pirates and other attack ships to give the illusion that the ship was followed through hyperspace.</p><p>Note that this event is <b>not</b> triggered at game start.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that entered the system</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onLeaveSystem"></a><a name="Topic177"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onLeaveSystem</div>
 <div class="CBody"><p>Triggered immediately before ship leaves a system and enters hyperspace.</p><pre>local onLeaveSystem = function (ship) ... end<br />Event.Register(&quot;onLeaveSystem&quot;, onLeaveSystem)</pre><p>If the ship was the player then all physics <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> objects are invalid after this method returns.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that left the system</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onSystemExplored"></a><a name="Topic178"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onSystemExplored</div>
 <div class="CBody"><p>Triggered when a system has just been explored by the player.</p><pre>local onSystemExplored = function (system) ... end<br />Event.Register(&quot;onSystemExplored&quot;, onSystemExplored)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">system</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaStarSystem.cpp.lua:StarSystem" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,755);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >StarSystem</a> that has just been explored</p></td></tr></table><div class="CHeading">Availability</div><p>October 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onFrameChanged"></a><a name="Topic179"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onFrameChanged</div>
 <div class="CBody"><p>Triggered as a dynamic <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> moves between frames of reference.</p><pre>local onFrameChanged = function (body) ... end<br />Event.Register(&quot;onFrameChanged&quot;, onFrameChanged)</pre><p>Details of the new frame itself can be obtained from the body's <a href="../index.html#File:LuaBody.cpp.lua:Body.frameBody" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,361);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body.frameBody</a> and <a href="../index.html#File:LuaBody.cpp.lua:Body.frameRotating" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,362);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body.frameRotating</a> attributes.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">body</td><td class="CDLDefinition"><p>the dynamic <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> that changed frames</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 12</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onShipDestroyed"></a><a name="Topic180"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipDestroyed</div>
 <div class="CBody"><p>Triggered when a ship is destroyed.</p><pre>local onShipDestroyed = function (ship, attacker) ... end<br />Event.Register(&quot;onShipDestroyed&quot;, onShipDestroyed)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the ship that was destroyed</p></td></tr><tr><td class="CDLEntry">attacker</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> that was responsible for reducing the ship's hull strength to 0. Usually a ship that fired lasers or missiles, but may be another <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> (eg <a href="../index.html#File:LuaPlanet.cpp.lua:Planet" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,337);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Planet</a> or <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>) if the ship was destroyed by a collision.</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onShipHit"></a><a name="Topic181"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipHit</div>
 <div class="CBody"><p>Triggered when a ship is hit by laser fire or a missile.</p><pre>local onShipHit = function (ship, attacker) ... end<br />Event.Register(&quot;onShipHit&quot;, onShipHit)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that was hit</p></td></tr><tr><td class="CDLEntry">attacker</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that fired the laser or missile</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onShipFiring"></a><a name="Topic182"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipFiring</div>
 <div class="CBody"><p>Triggered when a ship is firing its weapons.</p><pre>local onShipFiring = function (ship) ... end<br />Event.Register(&quot;onShipFiring&quot;, onShipFiring)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that is firing its weapons</p></td></tr></table><div class="CHeading">Availability</div><p>2014 May</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onShipCollided"></a><a name="Topic183"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipCollided</div>
 <div class="CBody"><p>Triggered when a ship collides with an object.</p><pre>local onShipCollided = function (ship, other) ... end<br />Event.Register(&quot;onShipCollided&quot;, onShipCollided)</pre><p>If the ship collides with a city building on a planet it will register as as collision with the planet itself.</p><p>If the ship &quot;collides&quot; with a missile, <a href="../index.html#File3:Event.lua:Event.onShipHit" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,181);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onShipHit</a> will be triggered instead of <a href="../index.html#File3:Event.lua:Event.onShipCollided" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,183);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onShipCollided</a>.</p><p>If the ship hit another <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a>, this event will be triggered twice, once for each ship.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that was hit</p></td></tr><tr><td class="CDLEntry">other</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> that the ship collided with</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onShipDocked"></a><a name="Topic184"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipDocked</div>
 <div class="CBody"><p>Triggered when a ship docks with a space station.</p><pre>local onShipDocked = function (ship, station) ... end<br />Event.Register(&quot;onShipDocked&quot;, onShipDocked)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that docked</p></td></tr><tr><td class="CDLEntry">station</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a> the ship docked with</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onShipUndocked"></a><a name="Topic185"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipUndocked</div>
 <div class="CBody"><p>Triggered when a ship undocks with a space station.</p><pre>local onShipUndocked = function (ship, station) ... end<br />Event.Register(&quot;onShipUndocked&quot;, onShipUndocked)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that docked</p></td></tr><tr><td class="CDLEntry">station</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a> the ship undocked with</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onShipLanded"></a><a name="Topic186"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipLanded</div>
 <div class="CBody"><p>Triggered when a ship performs a surface landing (not on a spaceport).</p><pre>local onShipLanded = function (ship, body) ... end<br />Event.Register(&quot;onShipLanded&quot;, onShipLanded)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that landed</p></td></tr><tr><td class="CDLEntry">body</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> the ship landed on</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 13</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onShipTakeOff"></a><a name="Topic187"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipTakeOff</div>
 <div class="CBody"><p>Triggered when a ship takes off from a surface (not from a spaceport).</p><pre>local onShipTakeOff = function (ship, body) ... end<br />Event.Register(&quot;onShipTakeOff&quot;, onShipTakeOff)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that took off</p></td></tr><tr><td class="CDLEntry">body</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> the ship took off from</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 13</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onShipAlertChanged"></a><a name="Topic188"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipAlertChanged</div>
 <div class="CBody"><p>Triggered when a ship's alert status changes.</p><pre>local onShipAlertChanged = function (ship, alert) ... end<br />Event.Register(&quot;onShipAlertChanged&quot;, onShipAlertChanged)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that changed status</p></td></tr><tr><td class="CDLEntry">alert</td><td class="CDLDefinition"><p>the new <a href="../index.html#File:LuaConstants.cpp.lua:Constants.ShipAlertStatus" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,687);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Constants.ShipAlertStatus</a></p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onJettison"></a><a name="Topic189"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onJettison</div>
 <div class="CBody"><p>Triggered when a ship jettisons a cargo item.</p><pre>local onJettison = function (ship, cargo) ... end<br />Event.Register(&quot;onJettison&quot;, onJettison)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> that jettisoned the cargo item</p></td></tr><tr><td class="CDLEntry">cargo</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaCargoBody.cpp.lua:CargoBody" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,346);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >CargoBody</a> now drifting in space</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onCargoUnload"></a><a name="Topic190"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onCargoUnload</div>
 <div class="CBody"><p>Triggered when the player unloads a cargo item while docked or landed.</p><pre>local onUnload = function (body, cargoType) ... end<br />Event.Register(&quot;onCargoUnload&quot;, onCargoUnload)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">body</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaBody.cpp.lua:Body" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,349);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Body</a> the <a href="../index.html#File:LuaPlayer.cpp.lua:Player" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,297);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Player</a> was docked with (a <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a>) or landed on (a <a href="../index.html#File:LuaPlanet.cpp.lua:Planet" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,337);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Planet</a>)</p></td></tr><tr><td class="CDLEntry">cargoType</td><td class="CDLDefinition"><p><a href="../index.html#File3:EquipType.lua:EquipType" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,41);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >EquipType</a> of the unloaded cargo</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 18</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onAICompleted"></a><a name="Topic191"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onAICompleted</div>
 <div class="CBody"><p>Triggered when a ship AI completes</p><pre>local onAICompleted = function (ship, error) ... end<br />Event.Register(&quot;onAICompleted&quot;, onAICompleted)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a></p></td></tr><tr><td class="CDLEntry">error</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaConstants.cpp.lua:Constants.ShipAIError" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,703);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Constants.ShipAIError</a></p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onCreateBB"></a><a name="Topic192"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onCreateBB</div>
 <div class="CBody"><p>Triggered when a space station bulletin board is created.</p><pre>local onCreateBB = function (station) ... end<br />Event.Register(&quot;onCreateBB&quot;, onCreateBB)</pre><p>The usual function of a <a href="../index.html#File3:Event.lua:Event.onCreateBB" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,192);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onCreateBB</a> event handler is to call <a href="../index.html#File3:SpaceStation.lua:SpaceStation.AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation.AddAdvert</a> to populate the bulletin board with ads.</p><p>This event is triggered the first time a <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> docks with the station or is placed directly into the station (eg by <a href="../index.html#File:LuaSpace.cpp.lua:Space.SpawnShipDocked" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,779);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Space.SpawnShipDocked</a> or at game start)</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">station</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a> the bulletin board is being created for</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onUpdateBB"></a><a name="Topic193"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onUpdateBB</div>
 <div class="CBody"><p>Triggered every 1-2 hours of game time to update the bulletin board.</p><pre>local onUpdateBB = function (station) ... end<br />Event.Register(&quot;onUpdateBB&quot;, onUpdateBB)</pre><p>The usual function of a <a href="../index.html#File3:Event.lua:Event.onUpdateBB" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,193);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onUpdateBB</a> event handler is to call <a href="../index.html#File3:SpaceStation.lua:SpaceStation.AddAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,88);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation.AddAdvert</a> and <a href="../index.html#File3:SpaceStation.lua:SpaceStation.RemoveAdvert" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,89);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation.RemoveAdvert</a> to update the bulletin board.</p><p>This event is triggered at a random game time 1-2 hours after it was previously called. This period is subject to change; script authors should not rely on it.</p><p><a href="../index.html#File3:Event.lua:Event.onUpdateBB" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,193);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onUpdateBB</a> will never be triggered for a station that has not previously had <a href="../index.html#File3:Event.lua:Event.onCreateBB" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,192);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >onCreateBB</a> triggered for it.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">station</td><td class="CDLDefinition"><p>the <a href="../index.html#File:LuaSpaceStation.cpp.lua:SpaceStation" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,711);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >SpaceStation</a> the bulletin board is being updated for</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 10</p><div class="CHeading">Status</div><p>stable</p></div>
</div>

<a name="Event.onShipTypeChanged"></a><a name="Topic194"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipTypeChanged</div>
 <div class="CBody"><p>Triggered when a ship's type changes (eg player buys a new ship).</p><pre>local onShipTypeChanged = function (ship) ... end<br />Event.Register(&quot;onShipTypeChanged&quot;, onShipTypeChanged)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> whose type just changed</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 32</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onShipEquipmentChanged"></a><a name="Topic195"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipEquipmentChanged</div>
 <div class="CBody"><p>Triggered when a ship's equipment set changes.</p><pre>local onShipEquipmentChanged = function (ship, equipType) ... end<br />Event.Register(&quot;onShipEquipmentChanged&quot;, onShipEquipmentChanged)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> whose equipment just changed</p></td></tr><tr><td class="CDLEntry">equipType</td><td class="CDLDefinition"><p>The <a href="../index.html#File3:EquipType.lua:EquipType" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,41);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >EquipType</a> item that was added or removed, or nil if the change involved multiple types of equipment</p></td></tr></table><div class="CHeading">Availability</div><p>alpha 15</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onShipFuelChanged"></a><a name="Topic196"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onShipFuelChanged</div>
 <div class="CBody"><p>Triggered when a ship's fuel status changes.</p><pre>local onShipFuelChanged = function (ship, fuelStatus) ... end<br />Event.Register(&quot;onShipFuelChanged&quot;, onShipFuelChanged)</pre><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">ship</td><td class="CDLDefinition"><p>the <a href="../index.html#File3:Ship.lua:Ship" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,14);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Ship</a> whose fuel status just changed</p></td></tr><tr><td class="CDLEntry">fuelStatus</td><td class="CDLDefinition"><p>the new <a href="../index.html#File:LuaConstants.cpp.lua:Constants.PropulsionFuelStatus" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,691);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >Constants.PropulsionFuelStatus</a></p></td></tr></table><div class="CHeading">Availability</div><p>alpha 20</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onGamePaused"></a><a name="Topic197"></a><div class="CTopic TEvent LLua">
 <div class="CTitle">onGamePaused</div>
 <div class="CBody"><p>Triggered when the game is paused.</p><pre>local onGamePaused = function () ... end<br />Event.Register(&quot;onGamePaused&quot;, onGamePaused)</pre><div class="CHeading">Availability</div><p>September 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

<a name="Event.onGameResumed"></a><a name="Topic198"></a><div class="CTopic TEvent LLua last">
 <div class="CTitle">onGameResumed</div>
 <div class="CBody"><p>Triggered when the game time accel (Game::GetTimeAccel) transitions from TIMEACCEL_PAUSED to any other value.</p><pre>local onGameResumed = function () ... end<br />Event.Register(&quot;onGameResumed&quot;, onGameResumed)</pre><div class="CHeading">Availability</div><p>September 2014</p><div class="CHeading">Status</div><p>experimental</p></div>
</div>

</body></html>